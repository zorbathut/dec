<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Security </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Security ">
    <meta name="generator" content="docfx 2.48.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="security">Security</h1>

<h2 id="parser">Parser</h2>
<p>Def is currently not intended to be secure in any way. It is expected to be used in an environment where all pieces - the assemblies running, the function calls made on it, and the XML data passed in - are trusted. If you want to use it in a partially-untrusted environment I strongly recommend doing a security audit beforehand.</p>
<p>That said, it shouldn't be unnecessarily insecure. Most of what it does is text parsing, and aside from obvious things like a malicious attacker sending a literally infinite XML document, it should generally not be exploitable in any way. Even though security is not a goal of this project, exploits that can be fixed without removing features are considered bugs.</p>
<p>Some things an attacker can do that you may wish to be aware of:</p>
<ul>
<li>By choosing which class to create, an attacker may be ale to create classes of any type that inherit from types used as members in Defs. This will cause the default constructor to be executed. This can be mitigated by initializing all class members in Defs to non-null values; by modifying source, one could mostly remove the ability of this library to create new classes.</li>
<li>This also applies to Defs themselves. Any Def-inheriting class can be instantiated. This is harder to remove without eliminating necessary functionality.</li>
<li>It's common for Defs to include Type members, usually as a factory pattern to create objects with complicated behavior. Type members are entirely unconstrained and can refer to any type, even types without the expected base class. This is best mitigated by implementing <a href="/future/typeconstraints.md">type constraints</a>.</li>
<li>Def will happily allow people to change both public and private members, including private members in base classes. This behavior is not always expected and can easily put objects in internally inconsistent states. This can be avoided by tagging internal-only fields with System.NonSerializedAttribute and accepting any input on any other field.</li>
</ul>
<p>If you think of another possible attack, please let me know and I'll add it to this list.</p>
<h2 id="recorder">Recorder</h2>
<p>While Def XML data is expected to come from a secure source, savegames are not. People commonly trade savegames around and would be surprised if this turned out to be a major security issue.</p>
<p>To mitigate this, Recorder saves do not support reflection-based serialization or deserialization. They also carefully enforce the type of class that can be created, preventing it from being instantiated in the first place if it is not a match for the underlying variable.</p>
<p>This isn't capable of solving everything. <code>object</code> fields will allow any type to be instantiated, and <code>Type</code> fields can accept any type (at least until <a href="/future/typeconstraints.md">type constraints</a> are added.) However, most of these issues now rely on the game programmer instead of Recorder's infrastructure.</p>
<p>I suspect there remain vulnerabilities. Please report them and I'll do my best to fix them.</p>
<p>In the end, this is a client-side video game library, and you should not install mods or run savegames from untrusted sources; this has been a vulnerability in games for many years and it's unlikely to stop now.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/zorbathut/def/blob/master/doc/documentation/security.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
